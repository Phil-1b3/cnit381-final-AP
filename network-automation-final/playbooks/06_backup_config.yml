---
- name: Backup device configurations
  hosts: routers:switches
  gather_facts: no

  tasks:
    - name: Get running configuration
      ios_command:
        commands:
          - show running-config
      register: running_config

    - name: Save configuration to file
      copy:
        content: "{{ running_config.stdout[0] }}"
        dest: "backups/{{ inventory_hostname }}.cfg"
